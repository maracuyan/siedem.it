---
---
@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;700&family=Roboto:wght@400;700&display=swap');

$theme-colors: (
  "primary-bg": #0D0D0D,
  "secondary-bg": #1A1A1A,
  "primary-text": #E0E0E0,
  "accent-color": #00A8FF,
  "link-color": #00A8FF,
  "link-hover-color": #40C4FF
);

// Minima theme variables (assuming these are available after import)
// Fallbacks are provided if they are not.
$spacing-unit:     30px !default; // Default from Minima
$small-font-size:  14px !default; // Minima's small font size approx
$grey-color:       #828282 !default; // Minima's grey
$text-color:       map-get($theme-colors, primary-text) !default; // Ensure $text-color is set for nav

@import "minima"; // Or "{{ site.theme }}" if minima is specified in _config.yml

// Basic dark theme overrides
body {
  background-color: map-get($theme-colors, primary-bg);
  color: map-get($theme-colors, primary-text);
  font-family: 'Roboto', sans-serif;
  line-height: 1.7; // Adjusted line height
}

h1, .h1 { // Minima uses .h1 class sometimes
  font-size: 2.2em; // Adjusted font size
  font-weight: 700; // Adjusted font weight
}

h1, h2, h3, h4, h5, h6 {
  font-family: 'Inter', sans-serif;
  color: map-get($theme-colors, primary-text);
  margin-bottom: 0.5em;
  letter-spacing: 0.02em; // Added letter spacing
}

a {
  color: map-get($theme-colors, link-color);
  text-decoration: none;
  &:hover, &:focus {
    color: map-get($theme-colors, link-hover-color);
    text-decoration: underline;
  }
}

// Call to Action Button
.cta-button {
  display: inline-block;
  background-color: map-get($theme-colors, accent-color);
  color: map-get($theme-colors, primary-bg); // Or a light color if accent is light
  padding: 10px 20px;
  border-radius: 5px;
  text-decoration: none;
  font-weight: bold;
  margin-top: $spacing-unit / 2;
  transition: background-color 0.3s ease;

  &:hover, &:focus {
    background-color: darken(map-get($theme-colors, accent-color), 10%);
    color: map-get($theme-colors, primary-bg); // Ensure text color remains consistent
    text-decoration: none;
  }
}

// --- Content Styling ---

// Max-width for post content for readability
.post-content {
  max-width: 650px;
  margin-left: auto;
  margin-right: auto;

  img, figure, video, pre, .highlight { // Added .highlight for code blocks
    max-width: 100%;
    height: auto;
    // margin-left: 0; // Ensure they don't get pushed by parent's auto margins if they are block
    // margin-right: 0;
  }

  // Ensure embedded iframes (like videos) also scale
  iframe {
    max-width: 100%;
  }
}

p {
  line-height: 1.6;
  margin-bottom: 1em;
}

ul, ol {
  margin-left: 1.5em;
  padding-left: 0.5em;
  margin-bottom: 1em;
  li {
    margin-bottom: 0.25em;
  }
}

blockquote {
  background: map-get($theme-colors, secondary-bg);
  border-left: 4px solid map-get($theme-colors, accent-color);
  padding: 1em 1.5em;
  margin: 1.5em 0;
  p:last-child {
    margin-bottom: 0;
  }
}

code:not(pre > code) {
  background: darken(map-get($theme-colors, secondary-bg), 5%);
  padding: 0.2em 0.4em;
  border-radius: 3px;
  font-family: "SFMono-Regular", Consolas, "Liberation Mono", Menlo, Courier, monospace;
  font-size: 0.9em;
  color: map-get($theme-colors, primary-text);
}

pre {
  background: darken(map-get($theme-colors, secondary-bg), 5%);
  padding: 1em;
  border-radius: 4px;
  overflow-x: auto;
  margin: 1.5em 0;
  border: none;
  code {
    background: none;
    padding: 0;
    font-size: inherit;
    color: inherit;
    border: none;
    border-radius: 0;
  }
}

img {
  max-width: 100%;
  height: auto;
  display: block;
  margin: 1em auto;
  border-radius: 4px;
}

hr {
  border: 0;
  height: 1px;
  background: map-get($theme-colors, secondary-bg);
  margin: 2em 0;
}

// --- Header ---
.site-header {
  background: rgba(map-get($theme-colors, secondary-bg), 0.8);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  z-index: 1020; // Ensure header is above most content but below critical modals if any
  padding: 0.5rem 0; // Adjusted padding slightly

  .wrapper {
    display: flex;
    justify-content: space-between;
    align-items: center;
    max-width: 100%; // Make header 100% width
    @media screen and (max-width: $on-palm) { // Minima variable for small screens
        padding-left: $spacing-unit / 2;
        padding-right: $spacing-unit / 2;
    }
  }
}

.site-title, .site-title:visited {
  color: $text-color; // Use defined $text-color
  font-size: 1.1em;
}

// Remove or comment out old .site-nav if no longer used
// .site-nav .page-link {
//   color: $text-color;
// }
// .site-nav .page-link:hover {
//   color: map-get($theme-colors, accent-color);
// }

.main-nav {
  display: flex;
  align-items: center;
  flex-grow: 1; // Allow main-nav to take space between title and search (if search is outside)
                 // Or, if search is inside main-nav, this helps align ul.
  ul {
    list-style: none;
    padding: 0;
    margin: 0; // Reset margin for ul
    display: flex;
    align-items: center;
    flex-grow: 1; // Allow the list of links to take available space, pushing search icon to the right
    li {
      margin-left: 18px; // Spacing between nav items
      a {
        text-decoration: none;
        color: $text-color;
        font-size: 0.95em;
        &:hover {
          color: map-get($theme-colors, link-hover-color);
          text-decoration: none; // No underline for nav items
        }
      }
    }
    // Add specific style for the first item if needed, e.g. remove left margin
    li:first-child {
        margin-left: 0; // No left margin for the first nav item if ul is pushed by title
    }
  }
  .search-icon {
    margin-left: 18px; // Consistent margin, as ul will now fill space
    svg {
      width: 22px; // Slightly larger
      height: 22px; // Slightly larger
      fill: map-get($theme-colors, link-color); // Use link color for more prominence
      vertical-align: middle;
    }
    &:hover svg{
        fill: map-get($theme-colors, link-hover-color); // Keep hover effect
    }
  }
}

// Active navigation item styling
.main-nav ul li.active-nav-item a {
  color: map-get($theme-colors, accent-color); // Use accent color
  font-weight: bold; // Make it bold
}

// --- Bottom Navbar ---
// Replaces .site-footer styling for the mobile-first bottom bar
.bottom-navbar {
  background: rgba(map-get($theme-colors, secondary-bg), 0.9); // Slightly more opaque
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  position: fixed;
  bottom: 0;
  left: 0;
  right: 0;
  width: 100%;
  z-index: 1030; // Ensure it's above content, header is 1020
  border-top: 1px solid darken(map-get($theme-colors, secondary-bg), 5%);
  display: flex;
  justify-content: space-around;
  align-items: center;
  padding: 6px 0; // Reduced padding slightly

  .nav-item {
    display: flex;
    flex-direction: column;
    align-items: center;
    text-decoration: none;
    color: $text-color; // Use primary text color
    font-size: 10px;
    svg {
      width: 20px;
      height: 20px;
      margin-bottom: 2px;
      fill: $text-color; // Icons use primary text color
    }
    span {
        margin-top: 2px; // ensure space even if svg margin-bottom is small
    }
    &:hover, &:focus {
      color: map-get($theme-colors, accent-color); // Hover color from theme
      svg {
        fill: map-get($theme-colors, accent-color);
      }
    }
  }
  // Hide on larger screens if it's meant to be mobile-only
  // The original .site-footer became static. This one will be hidden.
  @media (min-width: 768px) { // Minima's $on-medium or similar breakpoint
    display: none;
  }
}

// --- Footer (Actual static footer for desktop) ---
// This is if you want a traditional footer on desktop IN ADDITION to hiding .bottom-navbar
// For now, the _includes/footer.html is ONLY the bottom-navbar.
// If a traditional footer is needed, its HTML would need to be in _layouts/default.html for instance.
// And its styles here:
// .traditional-footer {
//   display: none; // Hidden on mobile
//   @media (min-width: 768px) {
//     display: block; // Visible on desktop
//     text-align: center;
//     padding: $spacing-unit 0;
//     background: map-get($theme-colors, primary-bg);
//     border-top: 1px solid #333;
//   }
// }

// Welcome section on homepage for spacing
.welcome-section {
  margin-bottom: $spacing-unit * 3; // Increase bottom margin significantly
}

// --- Layout Adjustments ---
.page-content {
  padding-top: 100px; // Adjusted for potentially taller header with new font/padding
  padding-bottom: 50px; // Adjusted for bottom-navbar height (approx 40-45px + margin)

  // On desktop, bottom-navbar is hidden, so padding-bottom can be reduced.
  @media (min-width: 768px) {
    padding-bottom: $spacing-unit; // Standard spacing unit for bottom padding on desktop
                                   // This assumes no traditional static footer, or it has its own margin.
  }
}

// Homepage Post List
.post-list {
  list-style: none;
  padding-left: 0;

  li {
    background: map-get($theme-colors, secondary-bg);
    border-radius: 5px;
    margin-bottom: $spacing-unit;
    border: 1px solid darken(map-get($theme-colors, secondary-bg), 10%); // Slightly more visible border
    box-shadow: 0 2px 5px rgba(0,0,0,0.1); // Subtle default shadow
    transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
    // Padding is removed from LI as it's now on .post-card-content

    &:hover {
      transform: translateY(-5px);
      box-shadow: 0 10px 20px rgba(0,0,0,0.25); // Slightly stronger hover shadow
    }
  }
}

// Styles for the new thumbnail container
.post-card-thumbnail {
  width: 100%;
  max-height: 200px;
  overflow: hidden;
  margin-bottom: $spacing-unit / 2; // Space between image and text content
  border-radius: 5px 5px 0 0; // Round top corners if image is at the very top

  img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    display: block;
    border-radius: 0; // Reset image radius if container handles it
    margin: 0; // Reset default image margin
  }
}

// The link now wraps thumbnail and content
a.post-card-link {
  display: block;
  color: inherit;
  text-decoration: none;

  &:hover, &:focus {
    text-decoration: none;
  }

  // Title hover effect is now on the link hovering the content part
  &:hover .post-card-content h3 {
    color: map-get($theme-colors, accent-color);
  }
}

// New container for text content, to handle padding
.post-card-content {
  padding: $spacing-unit / 1.5;

  h3 {
    color: map-get($theme-colors, primary-text);
    margin-top: 0;
    margin-bottom: $spacing-unit / 3;
  }

  .post-meta {
    display: block;
    font-size: $small-font-size;
    color: $grey-color;
    margin-bottom: $spacing-unit / 2;
  }

  .post-excerpt {
    p {
      color: lighten($text-color, 10%);
      font-size: 0.95em;
      &:last-child {
        margin-bottom: 0;
      }
    }
  }
}

// Basic responsiveness for header nav (example)
// This media query handles screens where the bottom navbar is typically visible
@media screen and (max-width: 767px) {
  .site-header .wrapper {
    justify-content: center; // Center site title when nav links and search are hidden
  }

  .main-nav ul {
    display: none; // Hide the list of links
  }

  .main-nav .search-icon {
    display: none; // Hide search icon in top bar
  }

  // .main-nav li - no longer needed if ul is hidden.
  // .main-nav .search-icon - no longer needed if search-icon is hidden.

  .site-title {
    font-size: 1.1em; // Keep smaller title (ensure this is not overridden by base)
    margin: 0; // Remove any default margins if they exist to help centering
  }

  // Adjustments for smaller screens (e.g. $on-palm, typically 600px)
  // This can be nested or separate. For simplicity, keeping some overrides here for 600px.
  @media screen and (max-width: 600px) {
    .site-title {
      font-size: 1.0em; // Even smaller title on very small screens
    }
    // Header font size adjustments for very small screens
    h1, .h1 {
      font-size: 1.8em;
    }
    h2 {
      font-size: 1.5em;
    }
  }
}


// Ensure the content wrapper takes full width available in header/footer
.wrapper {
    max-width: -webkit-calc(800px - (#{$spacing-unit}));
    max-width:         calc(800px - (#{$spacing-unit}));
    margin-right:  auto;
    margin-left:   auto;
    padding-right: $spacing-unit / 2;
    padding-left:  $spacing-unit / 2;
    @extend %clearfix; // From Minima

    @media screen and (max-width: $on-laptop) { // Minima variable for laptop screens

        max-width: -webkit-calc(800px - (#{$spacing-unit}));
        max-width:         calc(800px - (#{$spacing-unit}));
        padding-right: $spacing-unit / 2;
        padding-left:  $spacing-unit / 2;
    }
    @media screen and (max-width: $on-palm) { // Minima variable
        max-width: -webkit-calc(100% - (#{$spacing-unit})); // Take more width on small screens
        max-width:         calc(100% - (#{$spacing-unit}));
    }
}

// --- Sidebar Styles ---
.sidebar {
  position: fixed;
  top: 0;
  right: -300px; // Initially off-screen
  width: 300px;
  height: 100%;
  background-color: map-get($theme-colors, secondary-bg);
  box-shadow: 0 0 10px rgba(0,0,0,0.5);
  z-index: 1040; // Higher than header (1020) and bottom-navbar (1030)
  transition: right 0.3s ease-in-out;
  overflow-y: auto;
  padding: $spacing-unit;
  color: map-get($theme-colors, primary-text); // Default text color for sidebar
  box-sizing: border-box; // <--- Add this line

  // Responsive width for smaller screens
  @media screen and (max-width: $on-palm) { // Assuming $on-palm is around 600px
    width: 80%;
    right: -80%; // Adjust initial off-screen position
  }

  &.open {
    right: 0;
  }
}

.sidebar-close-btn {
  position: absolute;
  top: 10px;
  right: 15px;
  background: transparent;
  border: none;
  color: map-get($theme-colors, primary-text);
  font-size: 24px;
  cursor: pointer;

  &:hover {
    color: map-get($theme-colors, link-hover-color);
  }
}

.sidebar-content {
  // General styling for content if needed, e.g., margin-top after considering close button
  margin-top: 20px; // Example: to give some space below the close button area

  h2 {
    color: map-get($theme-colors, accent-color); // Use accent color for headings
    margin-top: $spacing-unit;
    margin-bottom: $spacing-unit / 2;
    &:first-child {
      margin-top: 0; // No top margin for the first heading in a section
    }
  }

  p {
    line-height: 1.6;
    margin-bottom: $spacing-unit / 2;
  }

  // Styling for the search input in sidebar
  #sidebar-search-input {
    width: 100%;
    padding: 10px;
    margin-bottom: $spacing-unit / 2;
    border: 1px solid darken(map-get($theme-colors, secondary-bg), 10%);
    background-color: map-get($theme-colors, primary-bg);
    color: map-get($theme-colors, primary-text);
    border-radius: 4px;
  }

  #sidebar-search-results {
    // Styles for search results container
    margin-top: $spacing-unit / 2;
    // Example:
    // a { display: block; padding: 5px 0; }
  }
}

.sidebar-section-content {
  display: none; // Hidden by default, JS will manage visibility
  // Add any common styling for all sections if needed
}

// --- Sidebar Overlay ---
.sidebar-overlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0,0,0,0.5);
  z-index: 1035; // Below sidebar (1040), above header (1020) and bottom-navbar (1030)
  display: none; // Initially hidden

  &.active {
    display: block;
  }
}
